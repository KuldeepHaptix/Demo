@using LandT_Defence.Models
@{
    LnTDefenceEntities db = new LnTDefenceEntities();
    var activeworkers = db.TagWorkers.Where(tg => tg.IsActive == true).ToList();

}

    <div class="row">
        <div class="col s12">
            <div id="validations" class="card card-tabs">
                <div class="card-content">
                    <div class="card-title">
                       
                            <div class="col s12 m6 l10">
                                <h4 class="card-title">Active Workers</h4>
                            </div>
                      
                    </div>
                    <div id="view-validations" class="active">
                        <table class="table datatable-complex-header" id="tblrow">
                            <thead>
                                <tr>
                                <th>Sr No </th>
                                    <th>Tag Name</th>
                                    <th>Worker Name</th>
                                     <th>Worker Code</th>
                                    <th>Vendor Name</th>
                                </tr>
                            </thead>
                            <tbody>
                              @if (activeworkers!=null)
                              {
                                  int i=1;
                                  foreach (var item in activeworkers)
                                  {
                                     var e = item.TagID.Trim();
                                      var w = item.WorkerID.Trim();
                                      <!-- var tag = db.Tags.FirstOrDefault(tg => tg.EUI==e);-->
                                      var worker = db.Workers.FirstOrDefault(wk => wk.WorkerCode==w ); 
                                         var vendor = db.Vendors.FirstOrDefault(vn=>vn.VendorID==worker.VendorID);
                                      <tr>
                                      <td>@i</td>
                                          <td>
                                              @e
                                          </td>
                                          <td>
                                              @worker.WorkerName
                                          </td>
                                          <td>
                                              @w
                                          </td>
                                          <td>
                                              @vendor.VendorName
                                          </td>
                                      </tr>
                                      i++;
                                  }
                              }
                            </tbody>
                        </table>


                    </div>
                    
                </div>
            </div>
        </div>
    </div>
